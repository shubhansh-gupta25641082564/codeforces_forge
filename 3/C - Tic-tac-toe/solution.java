import java.util.*;public class Main {    public static void main(String[] args) {        Scanner sc = new Scanner(System.in);        String a = sc.nextLine();        String b = sc.nextLine();        String c = sc.nextLine();        sc.close();        int[][] grid = new int[3][3];        grid[0][0] = a.charAt(0);        grid[0][1] = a.charAt(1);        grid[0][2] = a.charAt(2);        grid[1][0] = b.charAt(0);        grid[1][1] = b.charAt(1);        grid[1][2] = b.charAt(2);        grid[2][0] = c.charAt(0);        grid[2][1] = c.charAt(1);        grid[2][2] = c.charAt(2);        int cx = 0, c0 = 0;        for (int i = 0; i < 3; i ++) {            for (int j = 0; j < 3; j ++) {                if (grid[i][j] == 'X') {                    cx ++;                }                else if (grid[i][j] == '0') {                    c0 ++;                }            }        }        boolean xflag = false;        if (grid[0][0] == 'X' && grid[0][1] == 'X' && grid[0][2] == 'X') {            xflag = true;        }        else if (grid[1][0] == 'X' && grid[1][1] == 'X' && grid[1][2] == 'X') {            xflag = true;        }        else if (grid[2][0] == 'X' && grid[2][1] == 'X' && grid[2][2] == 'X') {            xflag = true;        }        else if (grid[0][0] == 'X' && grid[1][0] == 'X' && grid[2][0] == 'X') {            xflag = true;        }        else if (grid[0][1] == 'X' && grid[1][1] == 'X' && grid[2][1] == 'X') {            xflag = true;        }        else if (grid[0][2] == 'X' && grid[1][2] == 'X' && grid[2][2] == 'X') {            xflag = true;        }        else if (grid[0][0] == 'X' && grid[1][1] == 'X' && grid[2][2] == 'X') {            xflag = true;        }        else if (grid[0][2] == 'X' && grid[1][1] == 'X' && grid[2][0] == 'X') {            xflag = true;        }        boolean flag0 = false;        if (grid[0][0] == '0' && grid[0][1] == '0' && grid[0][2] == '0') {            flag0 = true;        }        else if (grid[1][0] == '0' && grid[1][1] == '0' && grid[1][2] == '0') {            flag0 = true;        }        else if (grid[2][0] == '0' && grid[2][1] == '0' && grid[2][2] == '0') {            flag0 = true;        }        else if (grid[0][0] == '0' && grid[1][0] == '0' && grid[2][0] == '0') {            flag0 = true;        }        else if (grid[0][1] == '0' && grid[1][1] == '0' && grid[2][1] == '0') {            flag0 = true;        }        else if (grid[0][2] == '0' && grid[1][2] == '0' && grid[2][2] == '0') {            flag0 = true;        }        else if (grid[0][0] == '0' && grid[1][1] == '0' && grid[2][2] == '0') {            flag0 = true;        }        else if (grid[0][2] == '0' && grid[1][1] == '0' && grid[2][0] == '0') {            flag0 = true;        }        boolean flagfilled = false;        if (grid[0][0] != '.' && grid[0][1] != '.' && grid[0][2] != '.' && grid[1][0] != '.' && grid[1][1] != '.' && grid[1][2] != '.' && grid[2][0] != '.' && grid[2][1] != '.' && grid[2][2] != '.') {            flagfilled = true;        }        if (cx > 5 || c0 > 4 || cx < c0 || ((cx - c0) > 1) || (xflag && flag0) || (xflag && (c0 >= cx)) || (flag0 && (cx > c0))) {            System.out.println("illegal");        }        else if (xflag) {            System.out.println("the first player won");        }        else if (flag0) {            System.out.println("the second player won");        }        else if (flagfilled) {            if (xflag == false && flag0 == false) {                System.out.println("draw");            }        }        else if (flagfilled == false) {            if (cx > c0) {                System.out.println("second");            }            else if (cx == c0) {                System.out.println("first");            }        }    }}
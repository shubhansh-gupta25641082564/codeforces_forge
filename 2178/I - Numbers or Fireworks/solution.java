import java.io.*;import java.util.*; public class Main {    static final long P = 998244353L;     static final class FastScanner {        private final InputStream in;        private final byte[] buffer = new byte[1 << 16];        private int ptr = 0, len = 0;         FastScanner(InputStream is) { in = is; }         private int read() throws IOException {            if (ptr >= len) {                len = in.read(buffer);                ptr = 0;                if (len <= 0) return -1;            }            return buffer[ptr++];        }         long nextLong() throws IOException {            int c;            do {                c = read();                if (c == -1) return Long.MIN_VALUE;            } while (c <= ' ');            long sgn = 1;            if (c == '-') {                sgn = -1;                c = read();            }            long val = 0;            while (c > ' ') {                val = val * 10 + (c - '0');                c = read();            }            return val * sgn;        }         int nextInt() throws IOException { return (int) nextLong(); }    }     static int n;    static long v;    static long[] xs = new long[45], ys = new long[45];    static boolean[][] e = new boolean[45][45];    static int[] col = new int[45];     static void dfs(int u, int c) {        col[u] = c;        for (int i = 1; i <= n; i++) {            if (e[u][i] && col[i] == -1) dfs(i, c ^ 1);        }    }     static void solveOne(FastScanner fs, StringBuilder out) throws Exception {        n = fs.nextInt();        v = fs.nextLong();         for (int i = 1; i <= n; i++) {            xs[i] = fs.nextLong();            ys[i] = fs.nextLong();            col[i] = -1;        }         for (int i = 1; i <= n; i++) {            Arrays.fill(e[i], false);        }         for (int i = 1; i <= n; i++) {            for (int j = 1; j < i; j++) {                long dx = xs[i] - xs[j];                long dy = ys[i] - ys[j];                long dist = dx * dx + dy * dy;                boolean ok = dist == v;                e[i][j] = ok;                e[j][i] = ok;            }        }         for (int i = 1; i <= n; i++) if (col[i] == -1) dfs(i, 0);         int[] A = new int[45];        int[] B = new int[45];        int m = 0, k = 0;         for (int i = 1; i <= n; i++) {            if (col[i] == 1) A[m++] = i;            else B[k++] = i;        }         if (m > k) {            int tmp = m; m = k; k = tmp;            int[] t = A; A = B; B = t;        }         int size = 1 << m;        long[] f = new long[size];        long[] g = new long[size];         int[] neiMask = new int[k];        int[] deg = new int[k];         for (int i = 0; i < k; i++) {            int mask = 0;            int bi = B[i];            for (int j = 0; j < m; j++) {                if (e[A[j]][bi]) mask |= (1 << j);            }            neiMask[i] = mask;            deg[i] = Integer.bitCount(mask);        }         long ans = 0;         for (int u = 0; u < (1 << m); u++) {            f[0] = 1;             for (int i = 0; i < k; i++) {                int maskU = u;                 int vsub = maskU;                while (true) {                    g[vsub] = f[vsub] % P;                    f[vsub] = 0;                    if (vsub == 0) break;                    vsub = (vsub - 1) & maskU;                }                 long s = 1L + (deg[i] - Integer.bitCount(maskU & neiMask[i]));                 vsub = maskU;                while (true) {                    f[vsub] = (g[vsub] * s) % P;                    if (vsub == 0) break;                    vsub = (vsub - 1) & maskU;                }                 int em = neiMask[i];                while (em != 0) {                    int j = Integer.numberOfTrailingZeros(em);                    em &= em - 1;                     vsub = maskU;                    int bit = 1 << j;                    while (true) {                        if ((vsub & bit) != 0) {                            g[vsub] += g[vsub ^ bit];                            if (g[vsub] >= P) g[vsub] -= P;                        }                        if (vsub == 0) break;                        vsub = (vsub - 1) & maskU;                    }                }                 vsub = maskU;                while (true) {                    f[vsub] += g[vsub];                    f[vsub] %= P;                    if (vsub == 0) break;                    vsub = (vsub - 1) & maskU;                }            }             int vsub = u;            while (true) {                ans += f[vsub];                ans %= P;                f[vsub] = 0;                if (vsub == 0) break;                vsub = (vsub - 1) & u;            }        }         ans = (ans + P - 1) % P;        out.append(ans).append('\n');    }     public static void main(String[] args) throws Exception {        FastScanner fs = new FastScanner(System.in);        StringBuilder out = new StringBuilder();        int T = fs.nextInt();        while (T-- > 0) solveOne(fs, out);        System.out.print(out.toString());    }}